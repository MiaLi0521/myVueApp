<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div id='app'>
        <p>{{ foo }}</p>
          <!-- 这里的 `foo` 不会更新！ -->
        <button v-on:click="foo = 'baz'">Change it</button>
    </div>

    <div id='example'>
        <h2>{{ a }}</h2>
    </div>
</body>
<script src="../vue.js"></script>
<script>
    // 一个 Vue 应用由一个通过 new Vue 创建的根 Vue 实例，以及可选的嵌套的、可复用的组件树组成。
    /*一个todo应用的组件树可能是这样的：
        根实例
        └─ TodoList
        ├─ TodoItem
        │  ├─ DeleteTodoButton
        │  └─ EditTodoButton
        └─ TodoListFooter
            ├─ ClearTodosButton
            └─ TodoListStatistics
    */

    /* 数据与方法： 
         当一个 Vue 实例被创建时，它将 data 对象中的所有的 property 加入到 Vue 的响应式系统中。当这些 property 的值发生改变时，视图将会产生“响应”，即匹配更新为新的值。
    */
    var data = {a:1} //数据对象
    var vm = new Vue({
        // 将data对象加入到一个Vue实例中
        data: data
    })

    console.log(vm.a == data.a) // 获得这个实例上的property == 返回源数据中对应的字段
    vm.a = 2 // 设置 property 也会影响到原始数据
    console.log(data.a)
    data.a = 3 // 反之亦然
    console.log(vm.a)

    /*
    当这些数据改变时，视图会进行重渲染。
    值得注意的是只有当实例被创建时就已经存在于 data 中的 property 才是响应式的。
    如果你知道你会在晚些时候需要一个 property，但是一开始它为空或不存在，那么你仅需要设置一些初始值。
    */
    var vm2 = new Vue({
        data: {
            newTodoText: '',
            visitCount: 0,
            hideCompletedTodos: false,
            todos: [],
            error: null
        }
    })

    // 使用 Object.freeze()，会阻止修改现有的 property，也意味着响应系统无法再追踪变化。
    var obj = {
        foo: 'bar'
    }
    Object.freeze(obj)
    new Vue({
        el: '#app',
        data: obj
    })

    /*除了数据 property，Vue 实例还暴露了一些有用的实例 property 与方法。
    它们都有前缀 $，以便与用户定义的 property 区分开来
    */
    var data2 = {a:1}
    var vm2 = new Vue({
        el: '#example',
        data: data2
    })
    console.log(vm2.$data == data2)
    console.log(vm2.$el == document.getElementById('example'))
    // $watch 是一个实例方法
    vm2.$watch('a', function(newValue, oldValue){
        console.log("a changed from "+oldValue+" to "+newValue)
    })

    /* 实例生命周期钩子
     每个 Vue 实例在被创建时都要经过一系列的初始化过程。例如，需要设置数据监听、编译模板、将实例挂载到 DOM 并在数据变化时更新 DOM 等。
     同时在这个过程中也会运行一些叫做生命周期钩子的函数，这给了用户在不同阶段添加自己的代码的机会。
    */
    new Vue({
        data:{
            a:1
        },
        created: function(){
            console.log('a is: ' + this.a)
        }
    })
    /*
    也有一些其它的钩子，在实例生命周期的不同阶段被调用，如 mounted、updated 和 destroyed。生命周期钩子的 this 上下文指向调用它的 Vue 实例。
    */
</script>
</html>